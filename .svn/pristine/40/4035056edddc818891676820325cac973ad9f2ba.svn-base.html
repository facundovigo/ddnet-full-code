<!DOCTYPE html>
<html>
<head>
<title>Estudios Eliminados</title>

		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="cache-control" content="max-age=0" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
		<meta http-equiv="pragma" content="no-cache" />

		<link rel="stylesheet" type="text/css" href="../css/jquery-ui.css" />
		<link rel="stylesheet" type="text/css" href="../css/layout-default.css" />
		<link rel="stylesheet" type="text/css" href="../css/main.css" />
		<link rel="stylesheet" type="text/css" href="../css/jquery.dataTables.css" />
		<link rel="stylesheet" type="text/css" href="../css/dataTables.tableTools.css" />
		<link rel="stylesheet" type="text/css" href="../css/dataTables.colVis.css" />
		
		<script type="text/javascript" src="../js/jquery-1.10.2.js"></script>
		<script type="text/javascript" src="../js/jquery-ui-1.10.4.js"></script>
		<script type="text/javascript" src="../js/jquery.dataTables.js"></script>
		<script type="text/javascript" src="../js/dataTables.tableTools.js"></script>
		<script type="text/javascript" src="../js/TableTools.ShowSelectedOnly.js"></script>
		<script type="text/javascript" src="../js/dataTables.colVis.js"></script>
		<script type="text/javascript" src="../js/jquery.validate.js"></script>
		<script type="text/javascript" src="../js/jquery.blockUI.js"></script>	
		<script type="text/javascript" src="../js/purl.js"></script>
		<script type="text/javascript" src="../js/css_browser_selector.js"></script>

<style type="text/css">

/*body {

	background: #d4ddd9;
}*/

.deletedStudies{

	font-size: 0.75em;
}

#dynamicModalDialog {
	overflow: hidden;
}

#dynamicModalDialogIframe {
	width: 100%; 
	height: 100%;
}

.ui-widget {

	font-size: 0.8em;
}

th {
	
	text-align: center	!important;
}

.cant {
	
	position: absolute;
	margin-left: 47.5%;
	font-weight: bold;
}

</style>

<script type="text/javascript">

	var dialog;
	var iFrame;
	var tabla;
	
	$(document).ready(function() {
		
		dialog = window.parent.$("#dynamicModalDialog");
		iFrame = window.parent.$("#dynamicModalDialogIframe");
		tabla = $('#tbDeleted');
		
		seteoTabla();
		$('.dataTables_length').css('float','left');
		tabla.css('padding-top', '10px');
	});
	
	function seteoTabla(){
		
		var columnas = [{ 	"title": "ESTUDIO N°", "data": "studyID", 
							"defaultContent": "", "class": "left", "width": "50px" },
						
						{ 	"title": "ID PACIENTE", "data": "patID", 
							"defaultContent": "", "class": "left", "width": "120px" },
						
						{ 	"title": "PACIENTE", "data": "patient", 
							"defaultContent": "", "class": "center" },
						
						{ 	"title": "MOD", "data": "mod", 
							"defaultContent": "", "class": "center", "width": "30px" },
						
						{ 	"title": "INSTITUCION", "data": "inst", 
							"defaultContent": "", "class": "center", "width": "180px" },
						
						{ 	"title": "FECHA ELIMINADO", "data": "date", 
							"defaultContent": "", "class": "center", "width": "100px" },
							
						{ 	"title": "USUARIO ACCION", "data": "login", 
							"defaultContent": "", "class": "right", "width": "150px" },

						{ 	"title": "ESTADO", "data": "state", 
							"defaultContent": "", "class": "right", "width": "200px" }
				  ];
		
		var columnasDef = [{	"targets": 7,
			 					"render": function ( data, type, row ) {
			 						return data == 1 ? "ELIMINACIÓN COMPLETA" : 
			 							   data == 2 ? "SOLO IMÁGENES" : "eliminado" ;
			 					}
							}
						  ];
		
		var dt = tabla.dataTable({
			"data": [],
			"order": [[5,'desc']],
			"lengthMenu": [ 5, 10, 15, 20, 25, 30, 50, 75, 100 ],
			"pageLength": 10,
			"dom": 'l<"cant">Trt<"clear">ip',
			"pagingType": "full_numbers",
			
			"tableTools": {
				//"sRowSelect": "os",
				"aButtons": [],
				fnRowSelected: function(o) {
					//itemsSelectionChanged();
				},
				fnRowDeselected: function(o) {
					//itemsSelectionChanged();
				}											
			},
			
			"columns": columnas,					
			"columnDefs": columnasDef,
			
			"language": {
	            "lengthMenu": "Mostrar _MENU_ eliminados por página",
	            "zeroRecords": "No se encontraron eliminados para mostrar con los criterios especificados.",
	            "info": "Mostrando página _PAGE_ de _PAGES_",
	            "infoEmpty": "Sin eliminados para mostrar",
	            "infoFiltered": "(filtrados de un total de _MAX_ eliminados)",
			    "emptyTable":     "Sin eliminados para mostrar",
			    "infoPostFix":    "",
			    "thousands":      ".",
			    "loadingRecords": "Cargando...",
			    "processing":     "Procesando...",
			    "search":         "Buscar:",
			    "paginate": {
			        "first":      "Primera",
			        "last":       "Última",
			        "next":       "Siguiente",
			        "previous":   "Anterior"
			    },
			    "aria": {
			        "sortAscending":  ": Click para ordenar ascendentemente",
			        "sortDescending": ": Click para ordenar descendentemente"
			    }
			}});
		
		CargarTabla(dt);
		
	}

	function CargarTabla(dt){
		$.getJSON("../restricted/rest/abm/deletedStudies")
		.done(function(info){
			dt.fnClearTable();
			if (info && info.length > 0) {	dt.fnAddData(info);
											$('.cant').text(info.length + ' ELIMINADOS');	
											}
		})
		.fail(function(){alert('Sucedió un error al momento de cargar los ESTUDIOS ELIMINADOS');});
		
	}

</script>

</head>

<body>

<div class="deletedStudies">

	<table id="tbDeleted" class="display"></table>

</div>

</body>

</html>
